<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Промокоды Фонбет — сравнение и отзывы</title>
  <link rel="stylesheet" href="assets/base.css">
  <link rel="stylesheet" href="assets/themes/fonbet.css">
</head>
<body>
<div class="wrap">

  <h1>Промокоды Фонбет — сравнение</h1>
  <div class="hint">Обновлено: 2025-08-28T09:00:00+03:00. Активные сверху; истёкшие — ниже и присутствуют и в карточках, и в таблице.</div>

  <div class="toolbar" id="toolbar">
    <div class="group">
      <label class="small" for="sort">Сортировать по:</label>
      <select id="sort">
        <option value="grabet" selected>По рейтингу GraBet</option>
        <option value="date">Дате публикации промокода</option>
        <option value="amount">По сумме бонуса</option>
        <option value="reviews">По отзывам</option>
      </select>
    </div>
    <div class="group">
      <label class="small">Отображать в виде:</label>
      <div class="seg" id="view">
        <button type="button" data-view="cards" class="active">Карточки</button>
        <button type="button" data-view="table">Большая таблица</button>
      </div>
    </div>
    <button class="theme-btn" id="themeToggle">Тёмная/Светлая тема</button>
  </div>

  <!-- Активные: карточки -->
  <div id="cardsActive">
    

    
    <article class="card" aria-label="Legalbet"
      data-date="2025-08-23"
      data-max="15000"
      data-avg="4.5"
      data-rating="92">

      <div class="card__top">
        <div class="src">Legalbet</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-23</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <!-- Коды -->
      <div class="codes">
        
          <div class="codepill" data-code="LEGAL"><span>LEGAL</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        
      </div>

      <!-- Инфосетка -->
      <div class="grid">
        <!-- Сумма -->
        <div class="kv kv-money">
          <b>Сумма</b>
          <div class="v-money">
            15000 ₽
          </div>
          
          <div class="kv-badges">
            
              <span class="nom nom--max">
                самый большой
              </span>
            
              <span class="nom nom--common">
                как у большинства
              </span>
            
          </div>
          
        </div>

        <!-- Для кого -->
        <div class="kv">
          <b>Для кого</b>
          <div class="v">новые пользователи</div>
          
        </div>

        <!-- Срок -->
        <div class="kv">
          <b>Срок</b>
          <div class="v">
            7 дней
          </div>
          
        </div>

        <!-- Отзывы: компактная плитка (оценки внутри, без «номинаций») -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              <span class="on" style="clip-path: inset(0 40% 0 0)">★</span>
              
            </div>
            <div class="rv-hint">на основе 516 оценок</div>
            <div class="rv-score">4.5 / 5</div>
          </div>
          <div class="rv-detail">
            
            
              
              <div class="rv-row"><div class="label">5 звёзд</div><div class="rv-bar"><i style="width: 66.9%"></i></div><div class="rv-count">345</div></div>
            
              
              <div class="rv-row"><div class="label">4 звёзд</div><div class="rv-bar"><i style="width: 24.0%"></i></div><div class="rv-count">124</div></div>
            
              
              <div class="rv-row"><div class="label">3 звёзд</div><div class="rv-bar"><i style="width: 4.3%"></i></div><div class="rv-count">22</div></div>
            
              
              <div class="rv-row"><div class="label">2 звёзд</div><div class="rv-bar"><i style="width: 2.9%"></i></div><div class="rv-count">15</div></div>
            
              
              <div class="rv-row"><div class="label">1 звёзд</div><div class="rv-bar"><i style="width: 1.9%"></i></div><div class="rv-count">10</div></div>
            
            <div class="rv-pop"><div class="meter"><i style="width: <built-in method pop of dict object at 0x7f893c689980>%"></i></div><div class="val">популярность <built-in method pop of dict object at 0x7f893c689980>/100</div></div>
            <div style="margin-top:8px"><button class="btn outline" type="button">Оставить отзыв</button><button class="btn" type="button" data-reviews-toggle>Свернуть</button></div>
          </div>
          
        </div>
      </div>

      <!-- Чипсы-нюансы -->
      
      <div class="chips">
        <span class="chip">ввод кода при регистрации</span><span class="chip">вывод ≥ 100 ₽</span><span class="chip">чистая прибыль после использования</span>
      </div>
      

      <!-- Итоговый вывод по предложению -->
      <div class="summary">
        
          
          
          
          
          Предложение «Legalbet» ориентировано на новые пользователи. Доступна сумма фрибета 15000 ₽, 7 дней. Активация: при регистрации. Нюансы: ввод кода при регистрации, вывод ≥ 100 ₽, чистая прибыль после использования. Рекомендуем сравнить условия с другими источниками в списке — сумма и ограничения могут отличаться.
        
      </div>

      <!-- Ссылки -->
      <div class="links">
        <a class="link" href="#">Страница условий</a>
        <a class="link" href="#">Архив прошедших кодов</a>
        
      </div>
    </article>
    
    <article class="card" aria-label="Metaratings"
      data-date="2025-08-28"
      data-max="15000"
      data-avg="4.0"
      data-rating="85">

      <div class="card__top">
        <div class="src">Metaratings</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-28</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <!-- Коды -->
      <div class="codes">
        
          <div class="codepill" data-code="META25"><span>META25</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        
      </div>

      <!-- Инфосетка -->
      <div class="grid">
        <!-- Сумма -->
        <div class="kv kv-money">
          <b>Сумма</b>
          <div class="v-money">
            100–15000 ₽
          </div>
          
        </div>

        <!-- Для кого -->
        <div class="kv">
          <b>Для кого</b>
          <div class="v">новые пользователи</div>
          
        </div>

        <!-- Срок -->
        <div class="kv">
          <b>Срок</b>
          <div class="v">
            7 дней
          </div>
          
        </div>

        <!-- Отзывы: компактная плитка (оценки внутри, без «номинаций») -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              
              <span class="off">★</span>
            </div>
            <div class="rv-hint">на основе 260 оценок</div>
            <div class="rv-score">4.0 / 5</div>
          </div>
          <div class="rv-detail">
            
            
              
              <div class="rv-row"><div class="label">5 звёзд</div><div class="rv-bar"><i style="width: 50.0%"></i></div><div class="rv-count">130</div></div>
            
              
              <div class="rv-row"><div class="label">4 звёзд</div><div class="rv-bar"><i style="width: 30.0%"></i></div><div class="rv-count">78</div></div>
            
              
              <div class="rv-row"><div class="label">3 звёзд</div><div class="rv-bar"><i style="width: 11.9%"></i></div><div class="rv-count">31</div></div>
            
              
              <div class="rv-row"><div class="label">2 звёзд</div><div class="rv-bar"><i style="width: 5.0%"></i></div><div class="rv-count">13</div></div>
            
              
              <div class="rv-row"><div class="label">1 звёзд</div><div class="rv-bar"><i style="width: 3.1%"></i></div><div class="rv-count">8</div></div>
            
            <div class="rv-pop"><div class="meter"><i style="width: <built-in method pop of dict object at 0x7f893c689ec0>%"></i></div><div class="val">популярность <built-in method pop of dict object at 0x7f893c689ec0>/100</div></div>
            <div style="margin-top:8px"><button class="btn outline" type="button">Оставить отзыв</button><button class="btn" type="button" data-reviews-toggle>Свернуть</button></div>
          </div>
          
        </div>
      </div>

      <!-- Чипсы-нюансы -->
      
      <div class="chips">
        <span class="chip">активация по ссылке</span><span class="chip">вывод после пополнения</span>
      </div>
      

      <!-- Итоговый вывод по предложению -->
      <div class="summary">
        
          
          
          
          
          Предложение «Metaratings» ориентировано на новые пользователи. Доступна сумма фрибета 100–15000 ₽, 7 дней. Активация: по ссылке/регистрация. Нюансы: активация по ссылке, вывод после пополнения. Рекомендуем сравнить условия с другими источниками в списке — сумма и ограничения могут отличаться.
        
      </div>

      <!-- Ссылки -->
      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
        
      </div>
    </article>
    
    <article class="card" aria-label="Рейтинг Букмекеров"
      data-date="2025-08-20"
      data-max="15000"
      data-avg="4.8"
      data-rating="96">

      <div class="card__top">
        <div class="src">Рейтинг Букмекеров</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-20</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <!-- Коды -->
      <div class="codes">
        
          <div class="codepill" data-code="RBMAX"><span>RBMAX</span><button class="copy-btn" data-copy>Копировать</button></div>
        
          <div class="codepill" data-code="РБМАКС"><span>РБМАКС</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        
      </div>

      <!-- Инфосетка -->
      <div class="grid">
        <!-- Сумма -->
        <div class="kv kv-money">
          <b>Сумма</b>
          <div class="v-money">
            100–15000 ₽
          </div>
          
        </div>

        <!-- Для кого -->
        <div class="kv">
          <b>Для кого</b>
          <div class="v">новые пользователи</div>
          
        </div>

        <!-- Срок -->
        <div class="kv">
          <b>Срок</b>
          <div class="v">
            7 дней
          </div>
          
        </div>

        <!-- Отзывы: компактная плитка (оценки внутри, без «номинаций») -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              <span class="on" style="clip-path: inset(0 40% 0 0)">★</span>
              
            </div>
            <div class="rv-hint">на основе 258 оценок</div>
            <div class="rv-score">4.8 / 5</div>
          </div>
          <div class="rv-detail">
            
            
              
              <div class="rv-row"><div class="label">5 звёзд</div><div class="rv-bar"><i style="width: 83.7%"></i></div><div class="rv-count">216</div></div>
            
              
              <div class="rv-row"><div class="label">4 звёзд</div><div class="rv-bar"><i style="width: 11.2%"></i></div><div class="rv-count">29</div></div>
            
              
              <div class="rv-row"><div class="label">3 звёзд</div><div class="rv-bar"><i style="width: 0.8%"></i></div><div class="rv-count">2</div></div>
            
              
              <div class="rv-row"><div class="label">2 звёзд</div><div class="rv-bar"><i style="width: 1.6%"></i></div><div class="rv-count">4</div></div>
            
              
              <div class="rv-row"><div class="label">1 звёзд</div><div class="rv-bar"><i style="width: 2.7%"></i></div><div class="rv-count">7</div></div>
            
            <div class="rv-pop"><div class="meter"><i style="width: <built-in method pop of dict object at 0x7f893c68a1c0>%"></i></div><div class="val">популярность <built-in method pop of dict object at 0x7f893c68a1c0>/100</div></div>
            <div style="margin-top:8px"><button class="btn outline" type="button">Оставить отзыв</button><button class="btn" type="button" data-reviews-toggle>Свернуть</button></div>
          </div>
          
        </div>
      </div>

      <!-- Чипсы-нюансы -->
      
      <div class="chips">
        <span class="chip">поддержка кириллического кода</span><span class="chip">вывод ≥ 100 ₽</span>
      </div>
      

      <!-- Итоговый вывод по предложению -->
      <div class="summary">
        
          
          
          
          
          Предложение «Рейтинг Букмекеров» ориентировано на новые пользователи. Доступна сумма фрибета 100–15000 ₽, 7 дней. Активация: регистрация или ЛК. Нюансы: поддержка кириллического кода, вывод ≥ 100 ₽. Рекомендуем сравнить условия с другими источниками в списке — сумма и ограничения могут отличаться.
        
      </div>

      <!-- Ссылки -->
      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
        
      </div>
    </article>
    
    <article class="card" aria-label="Sports.ru"
      data-date="2025-08"
      data-max="15000"
      data-avg="4.2"
      data-rating="88">

      <div class="card__top">
        <div class="src">Sports.ru</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <!-- Коды -->
      <div class="codes">
        
          <div class="codepill" data-code="SPORTS"><span>SPORTS</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        
      </div>

      <!-- Инфосетка -->
      <div class="grid">
        <!-- Сумма -->
        <div class="kv kv-money">
          <b>Сумма</b>
          <div class="v-money">
            200–15000 ₽
          </div>
          
          <div class="kv-badges">
            
              <span class="nom nom--common">
                как у большинства
              </span>
            
          </div>
          
        </div>

        <!-- Для кого -->
        <div class="kv">
          <b>Для кого</b>
          <div class="v">новые пользователи</div>
          
        </div>

        <!-- Срок -->
        <div class="kv">
          <b>Срок</b>
          <div class="v">
            7 дней
          </div>
          
        </div>

        <!-- Отзывы: компактная плитка (оценки внутри, без «номинаций») -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              
              <span class="off">★</span>
            </div>
            <div class="rv-hint">на основе 180 оценок</div>
            <div class="rv-score">4.2 / 5</div>
          </div>
          <div class="rv-detail">
            
            
              
              <div class="rv-row"><div class="label">5 звёзд</div><div class="rv-bar"><i style="width: 57.8%"></i></div><div class="rv-count">104</div></div>
            
              
              <div class="rv-row"><div class="label">4 звёзд</div><div class="rv-bar"><i style="width: 26.1%"></i></div><div class="rv-count">47</div></div>
            
              
              <div class="rv-row"><div class="label">3 звёзд</div><div class="rv-bar"><i style="width: 8.9%"></i></div><div class="rv-count">16</div></div>
            
              
              <div class="rv-row"><div class="label">2 звёзд</div><div class="rv-bar"><i style="width: 3.9%"></i></div><div class="rv-count">7</div></div>
            
              
              <div class="rv-row"><div class="label">1 звёзд</div><div class="rv-bar"><i style="width: 3.3%"></i></div><div class="rv-count">6</div></div>
            
            <div class="rv-pop"><div class="meter"><i style="width: <built-in method pop of dict object at 0x7f893c68a4c0>%"></i></div><div class="val">популярность <built-in method pop of dict object at 0x7f893c68a4c0>/100</div></div>
            <div style="margin-top:8px"><button class="btn outline" type="button">Оставить отзыв</button><button class="btn" type="button" data-reviews-toggle>Свернуть</button></div>
          </div>
          
        </div>
      </div>

      <!-- Чипсы-нюансы -->
      
      <div class="chips">
        <span class="chip">вывод после пополнения</span>
      </div>
      

      <!-- Итоговый вывод по предложению -->
      <div class="summary">
        
          
          
          
          
          Предложение «Sports.ru» ориентировано на новые пользователи. Доступна сумма фрибета 200–15000 ₽, 7 дней. Активация: регистрация/ЛК. Нюансы: вывод после пополнения. Рекомендуем сравнить условия с другими источниками в списке — сумма и ограничения могут отличаться.
        
      </div>

      <!-- Ссылки -->
      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
        
      </div>
    </article>
    
  </div>

  <!-- Активные: таблица (без изменений, только «Бессрочный») -->
  <div id="tableActive" class="table-wrap">
    <table class="table" id="offersTable">
      <thead>
        <tr>
          <th>Источник</th><th>Коды</th><th>Сумма</th><th>Срок</th>
          <th>Нюансы/Условия</th><th>Отзывы</th><th>Рейтинг GraBet</th><th>Обновлено</th>
        </tr>
      </thead>
      <tbody>
        
        <tr data-date="2025-08-23" data-max="15000" data-avg="4.5" data-rating="92">
          <td>Legalbet</td>
          <td>LEGAL</td>
          <td>15000 ₽</td>
          <td>7 д.</td>
          <td>
            ≤ 3.0
            ; вывод ≥ 100 ₽
            ; ввод кода при регистрации; вывод ≥ 100 ₽; чистая прибыль после использования
            
          </td>
          <td>4.5/5 (516)</td>
          <td class="rating-badge">92/100</td>
          <td>2025-08-23</td>
        </tr>
        
        <tr data-date="2025-08-28" data-max="15000" data-avg="4.0" data-rating="85">
          <td>Metaratings</td>
          <td>META25</td>
          <td>100–15000 ₽</td>
          <td>7 д.</td>
          <td>
            ≤ 3.0
            
            ; активация по ссылке; вывод после пополнения
            
          </td>
          <td>4.0/5 (260)</td>
          <td class="rating-badge">85/100</td>
          <td>2025-08-28</td>
        </tr>
        
        <tr data-date="2025-08-20" data-max="15000" data-avg="4.8" data-rating="96">
          <td>Рейтинг Букмекеров</td>
          <td>RBMAX, РБМАКС</td>
          <td>100–15000 ₽</td>
          <td>7 д.</td>
          <td>
            ≤ 3.0
            ; вывод ≥ 100 ₽
            ; поддержка кириллического кода; вывод ≥ 100 ₽
            
          </td>
          <td>4.8/5 (258)</td>
          <td class="rating-badge">96/100</td>
          <td>2025-08-20</td>
        </tr>
        
        <tr data-date="2025-08" data-max="15000" data-avg="4.2" data-rating="88">
          <td>Sports.ru</td>
          <td>SPORTS</td>
          <td>200–15000 ₽</td>
          <td>7 д.</td>
          <td>
            ≤ 3.0
            
            ; вывод после пополнения
            
          </td>
          <td>4.2/5 (180)</td>
          <td class="rating-badge">88/100</td>
          <td>2025-08</td>
        </tr>
        
      </tbody>
    </table>
  </div>

  <!-- Истёкшие (как было) -->
  <div class="section-title">Истёкшие промокоды</div>
  <div class="section-hint">Не активны. Оставлены для истории. В режиме «Таблица» показаны ниже активных.</div>

  <div id="expiredCards">
    
    <article class="card expired" data-date="истёк: 2025-06-30">
      <div class="card__top">
        <div class="src">Legalbet</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta"><span class="updated">истёк: 2025-06-30</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>EUROLEGALBET3</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 10000 ₽</div>
        <div class="kv"><b>Срок</b> 7 дней</div>
        <div class="kv"><b>Тип</b> бездепозитный фрибет</div>
        <div class="kv"><b>Источник</b> <a class="link" href="">ссылка</a></div>
      </div>
    </article>
    
    <article class="card expired" data-date="истёк: 2025-05-15">
      <div class="card__top">
        <div class="src">РБ</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta"><span class="updated">истёк: 2025-05-15</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>PGL</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 500–10000 ₽</div>
        <div class="kv"><b>Срок</b> 5 дней</div>
        <div class="kv"><b>Тип</b> бездепозитный фрибет</div>
        <div class="kv"><b>Источник</b> <a class="link" href="">ссылка</a></div>
      </div>
    </article>
    
    <article class="card expired" data-date="истёк: 2025-04-10">
      <div class="card__top">
        <div class="src">Sports.ru</div>
        <span class="badge">акция</span>
        <div class="meta"><span class="updated">истёк: 2025-04-10</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>FONSPRING</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 300–300 ₽</div>
        <div class="kv"><b>Срок</b> 3 дней</div>
        <div class="kv"><b>Тип</b> акция</div>
        <div class="kv"><b>Источник</b> <a class="link" href="">ссылка</a></div>
      </div>
    </article>
    
  </div>

  <div id="tableExpired" class="table-wrap">
    <table class="table" id="expiredTable">
      <thead>
        <tr>
          <th>Источник</th><th>Коды</th><th>Сумма</th><th>Срок</th>
          <th>Нюансы/Условия</th><th>Статус</th><th>Обновлено</th>
        </tr>
      </thead>
      <tbody>
        
        <tr data-date="истёк: 2025-06-30">
          <td>Legalbet</td>
          <td>EUROLEGALBET3</td>
          <td>10000 ₽</td>
          <td>7 д.</td>
          <td>—</td>
          <td>истёк</td>
          <td>истёк: 2025-06-30</td>
        </tr>
        
        <tr data-date="истёк: 2025-05-15">
          <td>РБ</td>
          <td>PGL</td>
          <td>500–10000 ₽</td>
          <td>5 д.</td>
          <td>—</td>
          <td>истёк</td>
          <td>истёк: 2025-05-15</td>
        </tr>
        
        <tr data-date="истёк: 2025-04-10">
          <td>Sports.ru</td>
          <td>FONSPRING</td>
          <td>300–300 ₽</td>
          <td>3 д.</td>
          <td>—</td>
          <td>истёк</td>
          <td>истёк: 2025-04-10</td>
        </tr>
        
      </tbody>
    </table>
  </div>

</div>

<script>
(function(){const k='grabet-theme',r=document.documentElement,b=document.getElementById('themeToggle');
const s=localStorage.getItem(k); if(s==='light'||s==='dark'){r.setAttribute('data-theme',s);}
b?.addEventListener('click',()=>{const n=r.getAttribute('data-theme')||'dark';const nx=n==='light'?'dark':'light';r.setAttribute('data-theme',nx);localStorage.setItem(k,nx);});})();
document.addEventListener('click',e=>{const b=e.target.closest('[data-copy]');if(!b)return;const p=b.closest('.codepill');const c=p?.dataset.code?.trim();if(!c)return;navigator.clipboard.writeText(c).then(()=>{const t=b.textContent;b.textContent='Скопировано!';setTimeout(()=>b.textContent=t,1200);});});
document.addEventListener('click',e=>{const t=e.target.closest('[data-reviews-toggle]');if(t){t.closest('.kv-reviews')?.classList.toggle('expanded');return;}
const tile=e.target.closest('.kv-reviews');if(tile && !e.target.closest('button')) tile.classList.toggle('expanded');});
(function(){const v=document.getElementById('view'),ca=document.getElementById('cardsActive'),ta=document.getElementById('tableActive'),te=document.getElementById('tableExpired');
ta.style.display='none'; te.style.display='none';
v?.addEventListener('click',e=>{const b=e.target.closest('button[data-view]');if(!b)return;
v.querySelectorAll('button').forEach(x=>x.classList.remove('active'));b.classList.add('active');
if(b.dataset.view==='table'){ta.style.display='block';te.style.display='block';ca.style.display='none';}else{ta.style.display='none';te.style.display='none';ca.style.display='block';}
doSort();});})();
const sortSel=document.getElementById('sort');sortSel?.addEventListener('change',doSort);
function doSort(){const m=sortSel?.value||'grabet';
const keyFn=(el)=>{const ts=Date.parse(el.getAttribute('data-date')||'')||0;const max=+(el.getAttribute('data-max')||0);const avg=+(el.getAttribute('data-avg')||0);let rating=+(el.getAttribute('data-rating')||0);
if (el.querySelector('.kv b')?.textContent.trim()==='Срок' && /Бессрочный/.test(el.textContent)) rating=Math.max(0,rating-5);
switch(m){case'date':return ts;case'amount':return max;case'reviews':return avg;default:return rating;}};
const wrap=document.getElementById('cardsActive');if(wrap && wrap.style.display!=='none'){[...wrap.querySelectorAll('.card')].sort((a,b)=>keyFn(b)-keyFn(a)).forEach(n=>wrap.insertBefore(n,wrap.firstChild));}
const tb=document.querySelector('#offersTable tbody');if(tb && document.getElementById('tableActive').style.display!=='none'){[...tb.querySelectorAll('tr')].sort((a,b)=>keyFn(b)-keyFn(a)).forEach(r=>tb.appendChild(r));}
const exWrap=document.getElementById('expiredCards');if(exWrap){[...exWrap.querySelectorAll('.card')].sort((a,b)=>(Date.parse(b.getAttribute('data-date')||'')||0)-(Date.parse(a.getAttribute('data-date')||'')||0)).forEach(n=>exWrap.appendChild(n));}
const exBody=document.querySelector('#expiredTable tbody');if(exBody){[...exBody.querySelectorAll('tr')].sort((a,b)=>(Date.parse(b.getAttribute('data-date')||'')||0)-(Date.parse(a.getAttribute('data-date')||'')||0)).forEach(r=>exBody.appendChild(r));}}
doSort();
</script>
</body>
</html>