<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Промокоды Фонбет — сравнение и отзывы</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
<div class="wrap">

  <h1>Промокоды Фонбет — сравнение</h1>
  <div class="hint">Обновлено: 2025-08-28T09:00:00+03:00. Активные сверху, ниже — истёкшие.</div>

  <!-- ===== Панель управления ===== -->
  <div class="toolbar" id="toolbar">
    <div class="group">
      <label class="small" for="sort">Сортировать по:</label>
      <select id="sort">
        <option value="grabet" selected>По рейтингу GraBet</option>
        <option value="date">Дате публикации промокода</option>
        <option value="amount">По сумме бонуса</option>
        <option value="reviews">По отзывам</option>
      </select>
    </div>

    <div class="group">
      <label class="small">Отображать в виде:</label>
      <div class="seg" id="view">
        <button type="button" data-view="cards" class="active">Карточки</button>
        <button type="button" data-view="table">Большая таблица</button>
      </div>
    </div>

    <button class="theme-btn" id="themeToggle">Тёмная/Светлая тема</button>
  </div>

  <!-- ====== Вид 1: Карточки ====== -->
  <div id="cardsView">
    
    <article class="card" aria-label="Legalbet"
      data-date="2025-08-23"
      data-max="15000"
      data-avg="4.5"
      data-rating="0">
      <div class="card__top">
        <div class="src">Legalbet</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-23</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <div class="codes">
        
        <div class="codepill" data-code="LEGAL"><span>LEGAL</span><button class="copy-btn" data-copy>Копировать</button></div>
        
      </div>

      

      <div class="grid">
        <div class="kv"><b>Сумма</b>
          15000 ₽
          
          <span class="nom nom--max">самый большой</span>
          
          <span class="nom nom--common">как у большинства</span>
          
        </div>
        <div class="kv"><b>Для кого</b> новые пользователи</div>
        <div class="kv"><b>Срок</b> 7 дней <span class="nom nom--std">как у всех</span></div>

        <!-- Плитка "Отзывы" вместо "Ставка" -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              <span class="on" style="clip-path: inset(0 40% 0 0)">★</span>
              
            </div>
            <div class="rv-hint">на основе 516 оценок</div>
            <div class="rv-score">4.5 / 5</div>
          </div>

          <div class="rv-detail">
            
            
              
              <div class="rv-row">
                <div class="label">5 звёзд</div>
                <div class="rv-bar"><i style="width: 66.9%"></i></div>
                <div class="rv-count">345</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">4 звёзд</div>
                <div class="rv-bar"><i style="width: 24.0%"></i></div>
                <div class="rv-count">124</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">3 звёзд</div>
                <div class="rv-bar"><i style="width: 4.3%"></i></div>
                <div class="rv-count">22</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">2 звёзд</div>
                <div class="rv-bar"><i style="width: 2.9%"></i></div>
                <div class="rv-count">15</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">1 звёзд</div>
                <div class="rv-bar"><i style="width: 1.9%"></i></div>
                <div class="rv-count">10</div>
              </div>
            
            <div class="rv-pop">
              <div class="meter"><i style="width: <built-in method pop of dict object at 0x7ff6eef89440>%"></i></div>
              <div class="val">популярность <built-in method pop of dict object at 0x7ff6eef89440>/100</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn outline" type="button">Оставить отзыв</button>
              <button class="btn" type="button" data-reviews-toggle>Свернуть</button>
            </div>
          </div>
        </div>
      </div>

      
      <div class="chips">
        <span class="chip">ввод кода при регистрации</span><span class="chip">вывод после пополнения ≥ 100 ₽</span><span class="chip">чистая прибыль после использования</span>
      </div>
      

      <div class="links">
        <a class="link" href="#">Страница условий</a>
        <a class="link" href="#">Архив прошедших кодов</a>
      </div>
    </article>
    
    <article class="card" aria-label="Metaratings"
      data-date="2025-08-28"
      data-max="15000"
      data-avg="4.0"
      data-rating="0">
      <div class="card__top">
        <div class="src">Metaratings</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-28</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <div class="codes">
        
        <div class="codepill" data-code="META25"><span>META25</span><button class="copy-btn" data-copy>Копировать</button></div>
        
      </div>

      
      <div class="nomline">
        
        <span class="nom nom--min">
          самый маленький встречается
          
        </span>
        
        <span class="nom nom--common">
          как у большинства
          
        </span>
        
      </div>
      

      <div class="grid">
        <div class="kv"><b>Сумма</b>
          100–15000 ₽
          
        </div>
        <div class="kv"><b>Для кого</b> новые пользователи</div>
        <div class="kv"><b>Срок</b> 7 дней <span class="nom nom--std">как у всех</span></div>

        <!-- Плитка "Отзывы" вместо "Ставка" -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              
              <span class="off">★</span>
            </div>
            <div class="rv-hint">на основе 260 оценок</div>
            <div class="rv-score">4.0 / 5</div>
          </div>

          <div class="rv-detail">
            
            
              
              <div class="rv-row">
                <div class="label">5 звёзд</div>
                <div class="rv-bar"><i style="width: 50.0%"></i></div>
                <div class="rv-count">130</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">4 звёзд</div>
                <div class="rv-bar"><i style="width: 30.0%"></i></div>
                <div class="rv-count">78</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">3 звёзд</div>
                <div class="rv-bar"><i style="width: 11.9%"></i></div>
                <div class="rv-count">31</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">2 звёзд</div>
                <div class="rv-bar"><i style="width: 5.0%"></i></div>
                <div class="rv-count">13</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">1 звёзд</div>
                <div class="rv-bar"><i style="width: 3.1%"></i></div>
                <div class="rv-count">8</div>
              </div>
            
            <div class="rv-pop">
              <div class="meter"><i style="width: <built-in method pop of dict object at 0x7ff6eef89e40>%"></i></div>
              <div class="val">популярность <built-in method pop of dict object at 0x7ff6eef89e40>/100</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn outline" type="button">Оставить отзыв</button>
              <button class="btn" type="button" data-reviews-toggle>Свернуть</button>
            </div>
          </div>
        </div>
      </div>

      
      <div class="chips">
        <span class="chip">активация по ссылке</span><span class="chip">вывод после пополнения</span>
      </div>
      

      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
      </div>
    </article>
    
    <article class="card" aria-label="Рейтинг Букмекеров"
      data-date="2025-08-20"
      data-max="15000"
      data-avg="4.8"
      data-rating="0">
      <div class="card__top">
        <div class="src">Рейтинг Букмекеров</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08-20</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <div class="codes">
        
        <div class="codepill" data-code="RBMAX"><span>RBMAX</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        <div class="codepill" data-code="РБМАКС"><span>РБМАКС</span><button class="copy-btn" data-copy>Копировать</button></div>
        
      </div>

      
      <div class="nomline">
        
        <span class="nom nom--min">
          самый маленький встречается
          
        </span>
        
        <span class="nom nom--common">
          как у большинства
          
        </span>
        
      </div>
      

      <div class="grid">
        <div class="kv"><b>Сумма</b>
          100–15000 ₽
          
        </div>
        <div class="kv"><b>Для кого</b> новые пользователи</div>
        <div class="kv"><b>Срок</b> 7 дней <span class="nom nom--std">как у всех</span></div>

        <!-- Плитка "Отзывы" вместо "Ставка" -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              <span class="on" style="clip-path: inset(0 40% 0 0)">★</span>
              
            </div>
            <div class="rv-hint">на основе 258 оценок</div>
            <div class="rv-score">4.8 / 5</div>
          </div>

          <div class="rv-detail">
            
            
              
              <div class="rv-row">
                <div class="label">5 звёзд</div>
                <div class="rv-bar"><i style="width: 83.7%"></i></div>
                <div class="rv-count">216</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">4 звёзд</div>
                <div class="rv-bar"><i style="width: 11.2%"></i></div>
                <div class="rv-count">29</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">3 звёзд</div>
                <div class="rv-bar"><i style="width: 0.8%"></i></div>
                <div class="rv-count">2</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">2 звёзд</div>
                <div class="rv-bar"><i style="width: 1.6%"></i></div>
                <div class="rv-count">4</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">1 звёзд</div>
                <div class="rv-bar"><i style="width: 2.7%"></i></div>
                <div class="rv-count">7</div>
              </div>
            
            <div class="rv-pop">
              <div class="meter"><i style="width: <built-in method pop of dict object at 0x7ff6eef8a140>%"></i></div>
              <div class="val">популярность <built-in method pop of dict object at 0x7ff6eef8a140>/100</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn outline" type="button">Оставить отзыв</button>
              <button class="btn" type="button" data-reviews-toggle>Свернуть</button>
            </div>
          </div>
        </div>
      </div>

      
      <div class="chips">
        <span class="chip">поддержка кириллического кода</span><span class="chip">вывод после пополнения ≥ 100 ₽</span>
      </div>
      

      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
      </div>
    </article>
    
    <article class="card" aria-label="Sports.ru"
      data-date="2025-08"
      data-max="15000"
      data-avg="4.2"
      data-rating="0">
      <div class="card__top">
        <div class="src">Sports.ru</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta">
          <span class="updated">обновлено: 2025-08</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <div class="codes">
        
        <div class="codepill" data-code="SPORTS"><span>SPORTS</span><button class="copy-btn" data-copy>Копировать</button></div>
        
      </div>

      

      <div class="grid">
        <div class="kv"><b>Сумма</b>
          200–15000 ₽
          
          <span class="nom nom--common">как у большинства</span>
          
        </div>
        <div class="kv"><b>Для кого</b> новые пользователи</div>
        <div class="kv"><b>Срок</b> 7 дней <span class="nom nom--std">как у всех</span></div>

        <!-- Плитка "Отзывы" вместо "Ставка" -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span><span class="on">★</span>
              
              <span class="off">★</span>
            </div>
            <div class="rv-hint">на основе 180 оценок</div>
            <div class="rv-score">4.2 / 5</div>
          </div>

          <div class="rv-detail">
            
            
              
              <div class="rv-row">
                <div class="label">5 звёзд</div>
                <div class="rv-bar"><i style="width: 57.8%"></i></div>
                <div class="rv-count">104</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">4 звёзд</div>
                <div class="rv-bar"><i style="width: 26.1%"></i></div>
                <div class="rv-count">47</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">3 звёзд</div>
                <div class="rv-bar"><i style="width: 8.9%"></i></div>
                <div class="rv-count">16</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">2 звёзд</div>
                <div class="rv-bar"><i style="width: 3.9%"></i></div>
                <div class="rv-count">7</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">1 звёзд</div>
                <div class="rv-bar"><i style="width: 3.3%"></i></div>
                <div class="rv-count">6</div>
              </div>
            
            <div class="rv-pop">
              <div class="meter"><i style="width: <built-in method pop of dict object at 0x7ff6eef8a440>%"></i></div>
              <div class="val">популярность <built-in method pop of dict object at 0x7ff6eef8a440>/100</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn outline" type="button">Оставить отзыв</button>
              <button class="btn" type="button" data-reviews-toggle>Свернуть</button>
            </div>
          </div>
        </div>
      </div>

      
      <div class="chips">
        <span class="chip">вывод после пополнения</span>
      </div>
      

      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
      </div>
    </article>
    
    <article class="card" aria-label="Boxberry"
      data-date="—"
      data-max="500"
      data-avg="3.9"
      data-rating="0">
      <div class="card__top">
        <div class="src">Boxberry</div>
        <span class="badge">фрибет за событие</span>
        <div class="meta">
          <span class="updated">обновлено: —</span>
          <span class="status active">активно</span>
        </div>
      </div>

      <div class="codes">
        
        <div class="codepill" data-code="SUPERCUP"><span>SUPERCUP</span><button class="copy-btn" data-copy>Копировать</button></div>
        
        <div class="codepill" data-code="UFC"><span>UFC</span><button class="copy-btn" data-copy>Копировать</button></div>
        
      </div>

      
      <div class="nomline">
        
        <span class="nom nom--event">
          событийная акция
          
        </span>
        
      </div>
      

      <div class="grid">
        <div class="kv"><b>Сумма</b>
          500–500 ₽
          
        </div>
        <div class="kv"><b>Для кого</b> зарегистрированные</div>
        <div class="kv"><b>Срок</b> — дней <span class="nom nom--std">как у всех</span></div>

        <!-- Плитка "Отзывы" вместо "Ставка" -->
        <div class="kv kv-reviews" data-reviews>
          <b>Отзывы о промокоде</b>
          <div class="rv-mini">
            <div class="rv-stars" aria-hidden="true">
              
              
              <span class="on">★</span><span class="on">★</span><span class="on">★</span>
              <span class="on" style="clip-path: inset(0 40% 0 0)">★</span>
              <span class="off">★</span>
            </div>
            <div class="rv-hint">на основе 60 оценок</div>
            <div class="rv-score">3.9 / 5</div>
          </div>

          <div class="rv-detail">
            
            
              
              <div class="rv-row">
                <div class="label">5 звёзд</div>
                <div class="rv-bar"><i style="width: 41.7%"></i></div>
                <div class="rv-count">25</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">4 звёзд</div>
                <div class="rv-bar"><i style="width: 30.0%"></i></div>
                <div class="rv-count">18</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">3 звёзд</div>
                <div class="rv-bar"><i style="width: 15.0%"></i></div>
                <div class="rv-count">9</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">2 звёзд</div>
                <div class="rv-bar"><i style="width: 8.3%"></i></div>
                <div class="rv-count">5</div>
              </div>
            
              
              <div class="rv-row">
                <div class="label">1 звёзд</div>
                <div class="rv-bar"><i style="width: 5.0%"></i></div>
                <div class="rv-count">3</div>
              </div>
            
            <div class="rv-pop">
              <div class="meter"><i style="width: <built-in method pop of dict object at 0x7ff6eef8a740>%"></i></div>
              <div class="val">популярность <built-in method pop of dict object at 0x7ff6eef8a740>/100</div>
            </div>
            <div style="margin-top:8px">
              <button class="btn outline" type="button">Оставить отзыв</button>
              <button class="btn" type="button" data-reviews-toggle>Свернуть</button>
            </div>
          </div>
        </div>
      </div>

      
      <div class="chips">
        <span class="chip">не приветственный бонус</span><span class="chip">нужна квалифицирующая ставка</span>
      </div>
      

      <div class="links">
        <a class="link" href="#">Страница условий</a>
        
      </div>
    </article>
    

    <div class="section-title">Истёкшие промокоды</div>
    <div class="section-hint">Не активны. Оставлены для истории.</div>

    
    <article class="card expired">
      <div class="card__top">
        <div class="src">Legalbet</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta"><span class="updated">истёк: 2025-06-30</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>EUROLEGALBET3</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 10000 ₽</div>
        <div class="kv"><b>Срок</b> 7 дней</div>
        <div class="kv"><b>Ставка</b> ординар ≤ 3.0</div>
        <div class="kv"><b>Тип</b> бездепозитный фрибет</div>
      </div>
    </article>
    
    <article class="card expired">
      <div class="card__top">
        <div class="src">РБ</div>
        <span class="badge">бездепозитный фрибет</span>
        <div class="meta"><span class="updated">истёк: 2025-05-15</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>PGL</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 500–10000 ₽</div>
        <div class="kv"><b>Срок</b> 5 дней</div>
        <div class="kv"><b>Ставка</b> ординар ≤ 2.5</div>
        <div class="kv"><b>Тип</b> бездепозитный фрибет</div>
      </div>
    </article>
    
    <article class="card expired">
      <div class="card__top">
        <div class="src">Sports.ru</div>
        <span class="badge">акция</span>
        <div class="meta"><span class="updated">истёк: 2025-04-10</span><span class="status exp">неактивно</span></div>
      </div>
      <div class="codes"><div class="codepill"><span>FONSPRING</span></div></div>
      <div class="grid">
        <div class="kv"><b>Сумма</b> 300–300 ₽</div>
        <div class="kv"><b>Срок</b> 3 дней</div>
        <div class="kv"><b>Ставка</b> ординар ≤ 3.0</div>
        <div class="kv"><b>Тип</b> акция</div>
      </div>
    </article>
    
  </div>

  <!-- ====== Вид 2: Большая таблица ====== -->
  <div id="tableView" class="table-wrap">
    <table class="table" id="offersTable">
      <thead>
        <tr>
          <th>Источник</th>
          <th>Промокод(ы)</th>
          <th>Сумма</th>
          <th>Срок</th>
          <th>Условия</th>
          <th>Отзывы</th>
          <th>Рейтинг GraBet</th>
          <th>Обновлено</th>
        </tr>
      </thead>
      <tbody>
        
        <tr data-date="2025-08-23" data-max="15000" data-avg="4.5" data-rating="0">
          <td>Legalbet</td>
          <td>LEGAL</td>
          <td>15000 ₽</td>
          <td>7 дней</td>
          <td>≤ 3.0, вывод после пополнения ≥ 100 ₽</td>
          <td>4.5/5 (516)</td>
          <td class="rating-badge">0/100</td>
          <td>2025-08-23</td>
        </tr>
        
        <tr data-date="2025-08-28" data-max="15000" data-avg="4.0" data-rating="0">
          <td>Metaratings</td>
          <td>META25</td>
          <td>100–15000 ₽</td>
          <td>7 дней</td>
          <td>≤ 3.0</td>
          <td>4.0/5 (260)</td>
          <td class="rating-badge">0/100</td>
          <td>2025-08-28</td>
        </tr>
        
        <tr data-date="2025-08-20" data-max="15000" data-avg="4.8" data-rating="0">
          <td>Рейтинг Букмекеров</td>
          <td>RBMAX, РБМАКС</td>
          <td>100–15000 ₽</td>
          <td>7 дней</td>
          <td>≤ 3.0, вывод после пополнения ≥ 100 ₽</td>
          <td>4.8/5 (258)</td>
          <td class="rating-badge">0/100</td>
          <td>2025-08-20</td>
        </tr>
        
        <tr data-date="2025-08" data-max="15000" data-avg="4.2" data-rating="0">
          <td>Sports.ru</td>
          <td>SPORTS</td>
          <td>200–15000 ₽</td>
          <td>7 дней</td>
          <td>≤ 3.0</td>
          <td>4.2/5 (180)</td>
          <td class="rating-badge">0/100</td>
          <td>2025-08</td>
        </tr>
        
        <tr data-date="—" data-max="500" data-avg="3.9" data-rating="0">
          <td>Boxberry</td>
          <td>SUPERCUP, UFC</td>
          <td>500–500 ₽</td>
          <td>— дней</td>
          <td>≤ —</td>
          <td>3.9/5 (60)</td>
          <td class="rating-badge">0/100</td>
          <td>—</td>
        </tr>
        
      </tbody>
    </table>
  </div>

</div>

<script>
/* === ТЕМА: ручное переключение + сохранение === */
(function(){
  const key='grabet-theme';
  const root=document.documentElement;
  const btn=document.getElementById('themeToggle');
  // применить сохранённую
  const saved=localStorage.getItem(key);
  if(saved==='light' || saved==='dark'){ root.setAttribute('data-theme', saved); }
  btn?.addEventListener('click',()=>{
    const now=root.getAttribute('data-theme')||'';
    const next= now==='light' ? 'dark' : 'light';
    root.setAttribute('data-theme', next);
    localStorage.setItem(key, next);
  });
})();

/* === КОПИРОВАНИЕ КОДА === */
document.addEventListener('click', e=>{
  const btn=e.target.closest('[data-copy]');
  if(!btn) return;
  const pill=btn.closest('.codepill');
  const code=pill?.dataset.code?.trim();
  if(!code) return;
  navigator.clipboard.writeText(code).then(()=>{
    const old=btn.textContent; btn.textContent='Скопировано!'; setTimeout(()=>btn.textContent=old,1200);
  });
});

/* === ОТЗЫВЫ: разворот плитки === */
document.addEventListener('click', e=>{
  const toggle=e.target.closest('[data-reviews-toggle]');
  if(toggle){
    const box=toggle.closest('.kv-reviews'); box?.classList.toggle('expanded'); return;
  }
  const tile=e.target.closest('.kv-reviews');
  if(tile && !e.target.closest('button')){ tile.classList.toggle('expanded'); }
});

/* === СМЕНА ВИДА (карточки/таблица) === */
(function(){
  const view=document.getElementById('view');
  const cards=document.getElementById('cardsView');
  const table=document.getElementById('tableView');
  if(!view) return;
  view.addEventListener('click', (e)=>{
    const b=e.target.closest('button[data-view]'); if(!b) return;
    view.querySelectorAll('button').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    const v=b.dataset.view;
    if(v==='table'){ table.style.display='block'; cards.style.display='none'; }
    else { table.style.display='none'; cards.style.display='block'; }
    // пересортируем активный вид под текущий селект
    doSort();
  });
})();

/* === СОРТИРОВКА === */
const sortSel=document.getElementById('sort');
sortSel?.addEventListener('change', doSort);
function doSort(){
  const mode=sortSel?.value || 'grabet';
  const cardsWrap=document.getElementById('cardsView');
  const tableWrap=document.getElementById('tableView');
  const tableBody=document.querySelector('#offersTable tbody');

  // функция ключа сортировки
  const keyFn = (el)=>{
    const dateStr=el.getAttribute('data-date')||'';
    const max=+(el.getAttribute('data-max')||0);
    const avg=+(el.getAttribute('data-avg')||0);
    const rating=+(el.getAttribute('data-rating')||0);
    const ts = Date.parse(dateStr) || 0;
    switch(mode){
      case 'date':   return ts;        // новее — выше
      case 'amount': return max;       // больше — выше
      case 'reviews':return avg;       // выше средняя — выше
      default:       return rating;    // рейтинг GraBet
    }
  };

  // если активен вид "карточки"
  if(cardsWrap && cardsWrap.style.display !== 'none'){
    const nodes=[...cardsWrap.querySelectorAll('.card:not(.expired)')];
    nodes.sort((a,b)=> keyFn(b)-keyFn(a)).forEach(n=>cardsWrap.insertBefore(n, cardsWrap.firstChild));
  }
  // если активен вид "таблица"
  if(tableBody && document.getElementById('tableView').style.display!=='none'){
    const rows=[...tableBody.querySelectorAll('tr')];
    rows.sort((a,b)=> keyFn(b)-keyFn(a)).forEach(r=>tableBody.appendChild(r));
  }
}
// первичная сортировка по рейтингу
doSort();
</script>
</body>
</html>